// çµæœè¡¨ç¤ºå‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ‘ã‚¿ãƒ¼ãƒ³
const spinningMessages = [

  // ==============================
  // æ±ç”¨ãƒ»ã‚¬ãƒãƒ£æ¼”å‡ºç³»
  // ==============================
  "ã‚¬ãƒãƒ£å›ã—ä¸­â€¦ğŸ˜‹",
  "ä¸€ç•ªè‰¯ã„ã®ã‚’é¸ã¶ã‚ˆã€œğŸ´",
  "è¿·ã„ã«è¿·ã£ã¨ã‚‹â€¦ğŸŒ€",
  "ä»Šæ—¥ã¯ã“ã‚Œã‹ã‚‚â€¦ï¼ŸğŸ¤”",
  "ç¾å‘³ã—ããªã‚‹ä¼šè­°ä¸­ğŸ“",
  "èƒƒè¢‹ã¨ç›¸è«‡â€¦ğŸ˜†",
  "ãˆãˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®äºˆæ„Ÿã—ã‹ã—ãªã„âœ¨",
  "ãã‚ãã‚é‹å‘½æ±ºã¾ã‚Šãã†â€¦ğŸ‘€",
  "ã•ãâ€¦çµæœç™ºè¡¨ã„ãã‚ˆï¼ğŸŠğŸ´",

  // ==============================
  // ãƒ¯ã‚¯ãƒ¯ã‚¯ãƒ»ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ç³»
  // ==============================
  "ãƒ¯ã‚¯ãƒ¯ã‚¯ã—ã¦ããŸã€œğŸ’“",
  "ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ä¸ŠãŒã£ã¦ããŸãƒ¼ï¼ğŸ”¥",
  "ãƒ¯ã‚¯ãƒ¯ã‚¯ãŒæ­¢ã¾ã‚‰ã‚“ã€œï¼ğŸ‰",
  "ãƒ‰ã‚­ãƒ‰ã‚­æœ€é«˜æ½®ğŸ’“",
  "ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¶ã¡ä¸ŠãŒã‚Šä¸­ğŸš€ğŸ”¥",
  "ãƒ¯ã‚¯ãƒ¯ã‚¯æ­¢ã¾ã‚‰ã‚“ï¼ğŸ’“",
  "ãƒ¯ã‚¯ãƒ¯ã‚¯åº¦ã€é™ç•Œçªç ´ä¸­ğŸ˜†",
  "ä»Šæ—¥ã¯ã„ã„äºˆæ„Ÿã—ã‹ã—ãªã„âœ¨",
  "ãƒ‰ã‚­ãƒ‰ã‚­ã—ãªãŒã‚‰å¾…ã£ã¨ã“ğŸ˜³âœ¨",
  "æ¥½ã—ã¿ã™ãã¦ãƒ‹ãƒ¤ãƒ‹ãƒ¤ã—ã¨ã‚‹ğŸ˜†",

  // ==============================
  // ã”ã¯ã‚“ãƒ»é£Ÿäº‹å…¨èˆ¬
  // ==============================
  "ãŠè…¹ã™ã„ã¦ããŸâ€¦ğŸ¤¤",
  "ã”é£¯ã®ã“ã¨è€ƒãˆã‚‹ã ã‘ã§å¹¸ã›ğŸ€",
  "ã”é£¯ã‚¿ã‚¤ãƒ ã£ã¦å¹¸ã›ã®å¡Šã‚ˆã­ğŸ˜‹",
  "ã”è¤’ç¾ã‚¿ã‚¤ãƒ åˆ°æ¥ğŸ",
  "ä»Šæ—¥ã¯è‡ªåˆ†ã«ã”è¤’ç¾ğŸ˜†",
  "ãŠè…¹ãŒå–œã¶æº–å‚™ã—ã¨ã‚‹ğŸ¤¤",
  "ä½•ãŒå‡ºã‚‹ã‹ãƒ‰ã‚­ãƒ‰ã‚­â€¦ğŸ˜³",
  "å½“ãŸã‚Šã§ã‚ã‚Œï¼ğŸ¯âœ¨",
  "ä»Šæ—¥ã¯çµ¶å¯¾ã„ã„æ—¥ã«ãªã‚‹âœ¨",
  "ãŠè…¹ã‚‚å¿ƒã‚‚æº–å‚™OKğŸ™Œ",

  // ==============================
  // ãƒ©ãƒ³ãƒãƒ»æ—¥å¸¸ã‚·ãƒ¼ãƒ³
  // ==============================
  "ã•ãã©ã‚Œã«ãªã‚‹ã‚“ã‚„ã‚ã€œğŸ˜†",
  "ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ä¸Šã’ã¦ã“ã€œğŸ‰",
  "ã‚‚ã†ã™ãçµæœå‡ºã‚‹ã‘ã‚“å¾…ã£ã¦ã­ã€œğŸ¾",
  "æ¥½ã—ã¿ã™ãã‚‹...ï¼ğŸ˜†ğŸ’“",
  "ä»Šæ—¥ã¯ä½•é£Ÿã¹ã¦ã‚‚å¹¸ã›ãªæ—¥ğŸ˜†",
  "ã”é£¯ã®æ™‚é–“ã£ã¦ãã‚Œã ã‘ã§ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ä¸ŠãŒã‚‹ã‚ˆã­ğŸ¶",
  "ãƒ¯ã‚¯ãƒ¯ã‚¯ã—ãªãŒã‚‰å¾…ã¤æ™‚é–“ã‚‚å¥½ãâœ¨",

  // ==============================
  // ã†ã©ã‚“ãƒ»å¤©ã·ã‚‰ãƒ»ä¸¸äº€è£½éººå¯„ã‚Š
  // ==============================
  "ä»Šæ—¥ã®ã†ã©ã‚“æ¥½ã—ã¿ãƒ¼ï¼ğŸ˜†ğŸ½ï¸",
  "æœ€é«˜ã®ã†ã©ã‚“ããŸãƒ¼ãƒ¼ï¼ğŸ‰",
  "ã©ã‚“ãªã†ã©ã‚“ã‚‚æœ€é«˜ã‚ˆã­ğŸ¥°",
  "ä»Šæ—¥ã‚‚è‰¯ã„ã†ã©ã‚“ã«ãªã‚Šãã†ğŸ´âœ¨",
  "ã‚µã‚¯ã‚µã‚¯å¤©ã·ã‚‰ç¾å‘³ã—ã™ãğŸ˜†",
  "ãƒˆãƒƒãƒ”ãƒ³ã‚°é¸ã¶ã®ãŒæœ€é«˜ã®ç¬é–“ğŸ˜†",
  "ä¸¸äº€è£½éººããŸã ã‘ã§å¬‰ã—ã‹ã€œğŸ¶",
  "ä¸¸äº€è£½éººã®ã†ã©ã‚“æ€ã„å‡ºã—ãŸã ã‘ã§ãŠè…¹é³´ã‚‹ğŸ˜‹",
  "ä¸¸äº€è£½éººã£ã¦èã„ãŸã ã‘ã§ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ä¸ŠãŒã‚‹ã‚ˆã­ğŸ‰",
  "ä»Šæ—¥ã¯ä¸¸äº€è£½éººã®æ—¥ã£ã¦ã“ã¨ã§ã‚ˆã‹ï¼ŸğŸ˜†ğŸ´",
  "ä¸¸äº€è£½éººã®å‰ã«ç«‹ã£ãŸç¬é–“ã€ã‚‚ã†å‹ã¡âœ¨",
  "ä¸¸äº€è£½éººã®é¦™ã‚Šæ€ã„å‡ºã—ã¦ãƒ‹ãƒ¤ã‘ã¨ã‚‹ğŸ˜†",
  "ä¸¸äº€è£½éººã§ä½•é ¼ã‚€ã‹è€ƒãˆã‚‹æ™‚é–“ãŒä¸€ç•ªæ¥½ã—ã€œğŸ¶",
  "ä¸¸äº€è£½éººã£ã¦é¸ã‚“ã©ã‚‹æ™‚ã‹ã‚‰ã‚‚ã†å¹¸ã›ğŸ€",
  "ä¸¸äº€è£½éººã®ã†ã©ã‚“ã€ä»Šæ—¥ã‚‚æœŸå¾…ã—ã‹ãªã„ğŸ˜‹âœ¨",
  "ä¸¸äº€è£½éººæ¥ãŸã‚‰å…¨éƒ¨æ­£è§£ãªæ°—ã—ã‹ã—ãªã„ğŸ˜†ğŸ”¥"
];

// ==============================
// çµæœã‚¿ã‚¤ãƒˆãƒ«æ–‡è¨€ãƒ‘ã‚¿ãƒ¼ãƒ³
// ==============================
const resultTitles = [
  "ä»Šå›ã®1000å††ã‚¬ãƒãƒ£ğŸ¥¢âœ¨",
  "1000å††ã‚¬ãƒãƒ£ã®çµæœğŸ˜†âœ¨",
  "ä»Šæ—¥ã®ãƒãƒ§ã‚¤ã‚¹ã¯ã“ã¡ã‚‰ğŸ˜†ğŸ´",
  "ã‚¬ãƒãƒ£ã®çµæœã€å‡ºãŸã‚ˆï¼ğŸ‰",
  "ä»Šæ—¥ã®èƒƒè¢‹ã‚»ãƒ¬ã‚¯ãƒˆğŸ˜‹âœ¨",
  "ãƒ¯ã‚¯ãƒ¯ã‚¯ã®çµæœã¯ã“ã¡ã‚‰ã€œğŸ˜†ğŸ½ï¸",
  "ã‚¬ãƒãƒ£ã®ç¥ã€é™è‡¨ğŸ™âœ¨",
  "è¶…ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ä¸ŠãŒã‚‹çµæœğŸ‰ğŸ˜†",
  "çµæœç™ºè¡¨ã€œğŸ˜‹ğŸŠ",
  "çµæœç™ºè¡¨ã€œğŸ˜†ğŸ‰",

  "ä»Šæ—¥ã®ãƒ™ã‚¹ãƒˆãƒãƒ§ã‚¤ã‚¹âœ¨ğŸ´",
  "ãƒ‰ã‚­ãƒ‰ã‚­ã®ç­”ãˆåˆã‚ã›ğŸ¯ğŸ˜‹",
  "ã‚¬ãƒãƒ£ãŒå°ã„ãŸç­”ãˆâœ¨",
  "ã“ã‚Œã¯å½“ãŸã‚Šã‚„ã‚ã€œï¼ğŸ‰ğŸ”¥",
  "ä»Šæ—¥ã®æº€è¶³ã‚³ãƒ¼ã‚¹å®ŒæˆğŸ˜†ğŸ´",
  "ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã¶ã¡ä¸Šã’çµæœğŸš€âœ¨",

  "ä»Šæ—¥ã®æ°—åˆ†ã«ãƒ”ãƒƒã‚¿ãƒªğŸ˜†âœ¨",
  "ä»Šæ—¥ã®æœ€é«˜ãƒãƒ§ã‚¤ã‚¹å®ŒæˆğŸ‰ğŸ½ï¸",
  "ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ä¸ŠãŒã‚‹çµ„ã¿åˆã‚ã›ğŸ”¥ğŸ˜‹",
  "ã“ã‚Œã¯æº€è¶³é–“é•ã„ãªã—ğŸ˜†âœ¨",

  "ã‚¬ãƒãƒ£ãŒãˆãˆä»•äº‹ã—ã¨ã‚‹ğŸ˜âœ¨",
  "ä»Šæ—¥ã®ãƒ¯ã‚¯ãƒ¯ã‚¯çµæœğŸ‰ğŸ˜†",
  "ã“ã‚Œã¯è¶…ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ä¸ŠãŒã‚‹ğŸ”¥âœ¨",
  "ä»Šæ—¥ã‚ã£ã¡ã‚ƒè‰¯ã„æ„Ÿã˜ğŸ˜†ğŸ¯",

  "æœ€é«˜ã®çµæœå‡ºãŸğŸ˜†âœ¨",
  "ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆãªç­”ãˆğŸ‰ğŸ´",
  "ã“ã‚Œã¯æœŸå¾…ã—ã¦ã‚ˆã‹ğŸ˜‹ğŸ”¥",
  "ä»Šæ—¥ã®ãƒãƒ§ã‚¤ã‚¹ã€å¤§æ­£è§£ğŸ˜†ğŸ’¯",
  "ã†ã¾ã„äºˆæ„Ÿã—ã‹ã—ãªã„ğŸ˜‹âœ¨",
  "ã“ã‚Œã¯ã‚¢ãƒ„ã„ğŸ”¥ğŸ´",
  "ã‚¬ãƒãƒ£ã®ç­”ãˆã¯ã“ã‚Œã§ã—ã‚‡ğŸ˜†âœ¨",
  "ä»Šæ—¥ã®æ¥½ã—ã¿æ±ºã¾ã£ãŸğŸŠğŸ´",

  "ä»Šæ—¥ã¯ãƒ„ã‚¤ã¦ã‚‹æ—¥ï¼ğŸ˜†âœ¨",
  "ã“ã‚Œã¯æ°—åˆ†ã‚¢ã‚¬ã‚‹ã‚„ã¤ï¼ğŸ”¥ğŸ´",
  "ä»Šæ—¥ã®ã”è¤’ç¾ã€ç¢ºå®šğŸ‰ğŸ˜‹",
  "ä¸€æ°—ã«å…ƒæ°—å‡ºã‚‹ã€œï¼ğŸ’ªâœ¨",
  "ã“ã‚Œã¯ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ä¸ŠãŒã‚‰ãªã„ã‚ã‘ãªã„ğŸ˜†ğŸ”¥",
  "è¶…å¤§å½“ãŸã‚Šï¼ğŸŠğŸ˜†",
  "å¹¸ã›ãƒ¡ãƒ¼ã‚¿ãƒ¼æº€ã‚¿ãƒ³ğŸ˜‹ğŸ€",
  "ä»Šæ—¥ã‚‚æ°—åˆ†ãƒãƒªãƒãƒªğŸ˜†ğŸ¶",
  "ãªã‚“ã‹ã‚‚ã†å‹ã£ãŸæ°—ãŒã™ã‚‹ğŸ”¥ğŸ˜",
  "ä»Šæ—¥ã®é‹ã€å…¨éƒ¨ã“ã“ã«æ¥ã¨ã‚‹âœ¨ğŸ¯",
  "ã“ã‚Œã¯ç¬‘é¡”ã«ãªã‚‹ã‚„ã¤ğŸ˜ŠğŸœ",
  "å…ƒæ°—ã‚¹ã‚¤ãƒƒãƒå…¥ã‚‹ğŸ’¥ğŸ˜†",
  "ä½•ã‚‚ã‹ã‚‚ä¸Šæ‰‹ãã„ãæ°—ãŒã™ã‚‹ğŸ˜‚ğŸŠ",

  "ä¸¸äº€è£½éººã§å„ªå‹ğŸ˜‹âœ¨",
  "ä¸¸äº€è£½éººã€ä»Šæ—¥ã¯ã“ã‚Œã§æ±ºã¾ã‚Šï¼ğŸœ",
  "ä¸¸äº€è£½éººã‚¬ãƒãƒ£ã®ç­”ãˆã¯ã“ã‚ŒğŸ˜†",
  "ä¸¸äº€è£½éººã€é–“é•ã„ãªã„ã‚„ã¤å‡ºãŸğŸ”¥",
  "ä¸¸äº€è£½éººã§ãƒ¯ã‚¯ãƒ¯ã‚¯ç¢ºå®šğŸŠ",
  "ä¸¸äº€è£½éººã€æœ€é«˜ã®çµ„ã¿åˆã‚ã›ããŸğŸ˜",
  "ä»Šæ—¥ã®ä¸¸äº€è£½éººã‚‚å½“ãŸã‚ŠğŸ¯",
  "ä¸¸äº€è£½éººã€ã“ã‚Œã¯ã‚¢ãƒ„ã„ğŸ”¥ğŸ´",
  "ä¸¸äº€è£½éººã§æº€è¶³ã‚³ãƒ¼ã‚¹ğŸ˜‹",
  "ä¸¸äº€è£½éººã€ã„ã„äºˆæ„Ÿã—ã‹ã—ãªã„âœ¨",
  "ä¸¸äº€è£½éººã‚¬ãƒãƒ£æˆåŠŸğŸ²âœ¨",
  "ä¸¸äº€è£½éººã€ä»Šæ—¥ã®æ­£è§£ã“ã‚Œï¼ğŸ˜†",
  "ä¸¸äº€è£½éººã§å¹¸ã›ç¢ºå®šğŸœğŸ’–",
  "ä¸¸äº€è£½éººã€æœŸå¾…ã—ã‹ãªã„ğŸ”¥",
  "ä¸¸äº€è£½éººã€ä»Šæ—¥ã‚‚å¼·ã„ğŸ˜ğŸ´",

"ä»Šæ—¥ã®ã†ã©ã‚“ã€ã“ã‚ŒãŒæ­£è§£ï¼ğŸœ",
"ã†ã©ã‚“é¸ã³ã€æˆåŠŸï¼ğŸ¯",
"ã†ã©ã‚“ã®ç¥ã•ã¾å¾®ç¬‘ã‚“ã ğŸ˜âœ¨",
"ã†ã©ã‚“æ°—åˆ†ã©çœŸã‚“ä¸­ğŸœ",
"ã†ã©ã‚“ã§å¹¸ã›ãƒãƒ£ãƒ¼ã‚¸ğŸ˜‹",
"ä»Šæ—¥ã¯ã†ã©ã‚“æ—¥å’ŒğŸœ",
"ã†ã©ã‚“æ¬²ã€ã—ã£ã‹ã‚Šæº€ãŸã•ã‚Œã‚‹ğŸ˜‹",
"ã“ã®ã†ã©ã‚“ã€é–“é•ã„ãªã„ï¼ğŸ”¥",
"ã†ã©ã‚“ã‚¿ã‚¤ãƒ é–‹å¹•ğŸ¥¢âœ¨",
"ã†ã©ã‚“ã§å…ƒæ°—ãƒãƒ£ãƒ¼ã‚¸ğŸ’ªğŸœ"
];

// ==============================
// å¤§å½“ãŸã‚Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
// ==============================
const godMessages = [
  "ğŸ‰âœ¨ ç¥å¼•ãï¼ï¼âœ¨ğŸ‰",
  "ğŸ™âœ¨ å¤§å½“ãŸã‚Šï¼ï¼âœ¨ğŸ™",
  "ğŸ’¯âœ¨ ä»Šæ—¥ã®é‹ã€å¼·ã™ãã‚‹ï¼âœ¨ğŸ’¯",
];

document.addEventListener("DOMContentLoaded", () => {
  const btn = document.getElementById("gachaBtn");
  const resultEl = document.getElementById("result");
  const spinningEl = document.getElementById("spinning");

  // ==============================
  // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
  // ==============================
  const pickRandom = (arr) => arr[Math.floor(Math.random() * arr.length)];

  // ==============================
  // Xã«ãƒã‚¹ãƒˆè¨­å®š
  // ==============================
  const postXBtn = document.getElementById("postXBtn");

function setupXPost(title, resultText){
  if (!postXBtn) return;
  const tweetText = `
ä¸¸äº€è£½éºº1000å††ã‚¬ãƒãƒ£å›ã—ã¦ã¿ãŸğŸ¥¢

${title}
${resultText}

ğŸ‘‡ã‚¬ãƒãƒ£
https://tetsu0312.github.io/marugameseimen_1000yen_gacha/

#ä¸¸äº€è£½éºº #ä¸¸äº€è£½éºº1000å††ã‚¬ãƒãƒ£
  `.trim();

  const url =
    "https://twitter.com/intent/tweet?text=" +
    encodeURIComponent(tweetText);

  postXBtn.style.display = "block";
  postXBtn.onclick = () => {
    window.open(url, "_blank");
  };
}

  
  // weightä»˜ãã‚«ãƒ†ã‚´ãƒªæŠ½é¸
  const pickWeightedCategory = (categories) => {
    const pool = [];
    categories.forEach(cat => {
      for (let i = 0; i < cat.weight; i++) {
        pool.push(cat);
      }
    });
    return pickRandom(pool);
  };

  btn.addEventListener("click", async () => {
    btn.disabled = true;

    // ==============================
    // è¡¨ç¤ºãƒªã‚»ãƒƒãƒˆ
    // ==============================
    resultEl.classList.remove("show");
    resultEl.innerHTML = "";
    spinningEl.classList.remove("show");

    if (postXBtn) {
    postXBtn.style.display = "none";
    }

    // ã‚¹ãƒ”ãƒ³ä¸­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    spinningEl.textContent = pickRandom(spinningMessages);
    requestAnimationFrame(() => spinningEl.classList.add("show"));

    // 1.8ç§’å¾…ã¤
    await new Promise(resolve => setTimeout(resolve, 1800));
    spinningEl.classList.remove("show");

    // ==============================
    // ãƒ‡ãƒ¼ã‚¿å–å¾—
    // ==============================
    const res = await fetch("menu.json");
    const data = await res.json();

    let total = 0;
    let remaining = 1000;
    const selected = [];

    // ==============================
    // â‘  ã†ã©ã‚“ã¯å¿…ãš1å“
    // ==============================
    const udonBase = pickRandom(data.udon);

    // æ¸© or å†·
    const temp = pickRandom(udonBase.temps);

    // ã‚µã‚¤ã‚ºï¼ˆweightä»˜ãï¼‰
    const weightedSizes = [];
    udonBase.sizes.forEach(size => {
      for (let i = 0; i < size.weight; i++) {
        weightedSizes.push(size);
      }
    });
    const sizeObj = pickRandom(weightedSizes);

    const udonItem = {
      name: `${udonBase.name}ï¼ˆ${temp}ãƒ»${sizeObj.size}ï¼‰`,
      price: sizeObj.price,
      category: "udon"
    };

    selected.push(udonItem);
    total += udonItem.price;
    remaining -= udonItem.price;

    // ==============================
    // â‘¡ ã‚µã‚¤ãƒ‰ã‚’ä»˜ã‘ã‚‹ã‹ï¼Ÿï¼ˆ95%ï¼‰
    // ==============================
    const shouldAddSide = Math.random() < 0.95;

    if (shouldAddSide && remaining > 0) {
      let continueAdding = true;

      while (continueAdding) {
        // ã‚«ãƒ†ã‚´ãƒªæŠ½é¸ï¼ˆå¤©ã·ã‚‰7ï¼šside2ï¼šã†ã©ãƒ¼ãªã¤1ï¼‰
        const category = pickWeightedCategory(data.sideCategories);

        // ãã®ã‚«ãƒ†ã‚´ãƒªã‹ã‚‰1å“
        const item = pickRandom(category.items);

        if (item.price <= remaining) {
          selected.push({
            ...item,
            category: category.type
          });
          total += item.price;
          remaining -= item.price;
        } else {
          // é«˜ã™ããŸã‚‰ç„¡ç†ã›ãšçµ‚äº†
          break;
        }

        // é€£ç¶šã§ä»˜ãç¢ºç‡ã‚’ä¸‹ã’ã‚‹ï¼ˆæš´èµ°é˜²æ­¢ï¼‰
        // â†’ ã ã‚“ã ã‚“æ­¢ã¾ã‚Šã‚„ã™ããªã‚‹ã€‚å€¤ã‚’å°ã•ãã™ã‚‹ã¨ã‚µã‚¤ãƒ‰ãŒå¢—ãˆã‚„ã™ããªã‚‹ã€‚
        if (Math.random() < 0.35) {
          continueAdding = false;
        }
      }
    }

    // ==============================
    // çµæœè¡¨ç¤º
    // ==============================
    const listHtml = selected
      .map(item => `<li>${item.name}ï¼ˆ${item.price}å††ï¼‰</li>`)
      .join("");

    const title = pickRandom(resultTitles);

    resultEl.innerHTML = `
      <h2 class="result-title">${title}</h2>
      <ul class="result-list">
        ${listHtml}
      </ul>
      <p class="result-summary">
        åˆè¨ˆ:${total}å††ï¼ˆæ®‹ã‚Š:${1000 - total}å††ï¼‰
      </p>
    `;

    // ==============================
    // Xç”¨ çµæœãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ
    // ==============================
const resultLines = selected.map(
  item => `ãƒ»${item.name}ï¼ˆ${item.price}å††ï¼‰`
);

const resultText = `
${resultLines.join("\n")}
ã€€åˆè¨ˆ:${total}å††ï¼ˆæ®‹ã‚Š:${1000 - total}å††ï¼‰
`.trim();

setupXPost(title, resultText);

    resultEl.classList.add("show");
    btn.disabled = false;

  });
});
